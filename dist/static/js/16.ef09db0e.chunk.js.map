{"version":3,"sources":["Views/Components/ProductVerification.js"],"names":["DeliveryForm","props","APP_TOKEN","get","userId","useState","location","state","order","product","productList","setProductUnitList","isLoading","setIsLoading","isSubmitting","setIsSubmitting","useEffect","getProductUnitList","a","StaticAPI","result","productUnitList","console","log","handleSubmit","e","preventDefault","productData","map","data","push","delivered_id","ordered_id","id","product_id","quantity","document","getElementById","value","unit_id","OrderAPI","orderVerificationByCustomer","orderId","window","pathname","alert","class","onSubmit","order_id","getDateInDDMMYYYY","order_date","mobile","delivery_date","full_name","flat_add","street_add","city","pincode","className","length","index","product_name","type","name","min","step","required","delivered_unit_name","disabled"],"mappings":"qPAYe,SAASA,EAAaC,GAElBC,IAAUC,MAAMC,OAA/B,IAFwC,EAGbC,mBAASJ,EAAMK,SAASC,MAAMC,OAHjB,mBAGjCA,EAHiC,aAIFH,mBAASJ,EAAMK,SAASC,MAAME,UAJ5B,mBAIjCC,EAJiC,aAKML,mBAAS,KALf,mBAKhBM,GALgB,aAMNN,oBAAS,GANH,mBAMjCO,EANiC,KAMtBC,EANsB,OAOAR,oBAAS,GAPT,mBAOjCS,EAPiC,KAOnBC,EAPmB,KAUxCC,qBAAU,WACNC,MACF,IAEF,IAAMA,EAAkB,uCAAG,4BAAAC,EAAA,+EAEEC,IAAUF,qBAFZ,OAEbG,EAFa,OAGnBT,EAAmBS,EAAOC,iBAHP,gDAKnBC,QAAQC,IAAI,WAAZ,MALmB,yDAAH,qDASlBC,EAAY,uCAAG,WAAOC,GAAP,iBAAAP,EAAA,6DACjBO,EAAEC,iBACFb,GAAa,GACbE,GAAgB,GAHC,SAMTY,EAAc,GAClBjB,EAAYkB,KAAI,SAACC,GACbF,EAAYG,KAAK,CACbC,aAAeF,EAAKE,aACpBC,WAAaH,EAAKI,GAClBC,WAAaL,EAAKK,WAClBC,SAAWC,SAASC,eAAe,mBAAmBR,EAAKK,YAAYI,MACvEC,QAAUV,EAAKU,aAbV,SAiBQC,IAASC,4BAA4B,CAACd,YAAaA,EAAae,QAAUlC,EAAMyB,KAjBxF,OAiBPb,EAjBO,OAkBbP,GAAa,IAEC,IAAXO,EACCuB,OAAOrC,SAASsC,SAAW,wBAE3BC,MAAM,oBAvBG,kDA0BbvB,QAAQC,IAAI,WAAZ,MA1Ba,0DAAH,sDA8BlB,OACA,kBAAC,WAAD,KACI,kBAAC,IAAD,MACI,6BAASuB,MAAM,gBACX,yBAAKA,MAAM,aACP,yBAAKA,MAAM,8BACP,yBAAKA,MAAM,iDACP,wBAAIA,MAAM,wBAAV,iBACA,0BAAMC,SAAUvB,EAAcsB,MAAM,2BAC5B,yBAAKA,MAAM,uBACP,yBAAKA,MAAM,YACP,yBAAKA,MAAM,cACP,6CACA,yBAAKA,MAAM,UACP,4BAAKtC,EAAMwC,aAIvB,yBAAKF,MAAM,YACP,yBAAKA,MAAM,cACP,+CACA,yBAAKA,MAAM,UACP,4BAAKG,YAAkBzC,EAAM0C,gBAIzC,yBAAKJ,MAAM,YACP,yBAAKA,MAAM,cACP,+CACA,yBAAKA,MAAM,UACP,4BAAKtC,EAAM2C,WAIvB,yBAAKL,MAAM,YACP,yBAAKA,MAAM,cACP,kDACA,yBAAKA,MAAM,UACX,4BAAKG,YAAkBzC,EAAM4C,mBAIrC,yBAAKN,MAAM,YACP,yBAAKA,MAAM,cACP,kDACA,yBAAKA,MAAM,UACP,4BAAKtC,EAAM6C,cAIvB,yBAAKP,MAAM,YACP,yBAAKA,MAAM,cACP,4CACA,yBAAKA,MAAM,UACP,4BAAKtC,EAAM8C,SAAW,KAAO9C,EAAM+C,WAAa,KAAO/C,EAAMgD,KAAO,KAAOhD,EAAMD,MAAQ,MAAQC,EAAMiD,YAInH,yBAAKX,MAAM,aAAX,IAAwB,6BAAxB,KACA,yBAAKA,MAAM,aACP,6CAEJ,2BAAOY,UAAU,oCACb,+BACI,4BACI,uCACA,mDAIJ,gCACEhD,EAAYiD,OAAQ,EAAIjD,EAAa,IAAIkB,KAAI,SAACC,EAAM+B,GAClD,OACI,4BACI,4BAAK/B,EAAKgC,cACV,4BACI,yBAAKf,MAAM,iCACP,2BAAOgB,KAAK,SAASC,KAAM,mBAAmBlC,EAAKK,WAAYY,MAAM,aAAab,GAAI,mBAAmBJ,EAAKK,WAAY8B,IAAI,IAAIC,KAAK,OAAOC,UAAQ,IACtJ,uBAAGpB,MAAM,wBAAT,IAAkCjB,EAAKsC,oBAAvC,aAoB5B,yBAAKrB,MAAM,kBACP,2BAAOgB,KAAK,SAASxB,MAAM,SAASQ,MAAM,wBAAwBsB,SAAUtD,WAQhH,kBAAC,IAAD,MACCF,EAAc,kBAAC,IAAD,MAAmB","file":"static/js/16.ef09db0e.chunk.js","sourcesContent":["import React, {useState, useEffect, Fragment} from 'react';\r\n\r\n//Components \r\nimport {APP_TOKEN} from '../../api/config/Constants.js';\r\nimport StaticAPI from '../../api/static.js';\r\nimport OrderAPI from '../../api/order.js';\r\nimport Header from '../Partials/Header.js';\r\nimport Footer from '../Partials/Footer.js';\r\nimport CallLoader from '../../common/Loader.js';\r\n\r\nimport {getDate, getDateInDDMMYYYY} from '../../common/moment.js';\r\n\r\nexport default function DeliveryForm(props) {\r\n\r\n    const userId = APP_TOKEN.get().userId;\r\n    const [order, setOrder]  = useState(props.location.state.order);\r\n    const [productList, setProductList] = useState(props.location.state.product);\r\n    const [productUnitList, setProductUnitList] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\r\n    useEffect(()=>{\r\n        getProductUnitList();\r\n    },[]);\r\n\r\n    const getProductUnitList = async () => {\r\n        try{\r\n            const result = await StaticAPI.getProductUnitList();\r\n            setProductUnitList(result.productUnitList);            \r\n        }catch(e){\r\n            console.log('Error...',e);\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setIsSubmitting(true);\r\n\r\n        try{\r\n            let productData = [];\r\n            productList.map((data)=> {\r\n                productData.push({\r\n                    delivered_id : data.delivered_id,\r\n                    ordered_id : data.id,\r\n                    product_id : data.product_id,\r\n                    quantity : document.getElementById('provideQuantity-'+data.product_id).value,\r\n                    unit_id : data.unit_id,\r\n                })\r\n            })\r\n\r\n            const result = await OrderAPI.orderVerificationByCustomer({productData: productData, orderId : order.id});\r\n            setIsLoading(false);\r\n\r\n            if(result === true){ // true = inserted\r\n                window.location.pathname = '/view-user-order-list';\r\n            }else{\r\n                alert('Failed Insertion');\r\n            }\r\n        }catch(e){\r\n            console.log('Error...', e);\r\n        }\r\n    }\r\n\r\n    return(\r\n    <Fragment>\r\n        <Header />\r\n            <section class=\"ftco-section\">\r\n                <div class=\"container\">\r\n                    <div class=\"row justify-content-center\">\r\n                        <div class=\"col-xl-12 ftco-animate fadeInUp ftco-animated\">\r\n                            <h3 class=\"mb-4 billing-heading\">Delivery Form</h3>\r\n                            <form onSubmit={handleSubmit} class=\"p-5 bg-light b-top-dark\">\r\n                                    <div class=\"row align-items-end\">\r\n                                        <div class=\"col-md-3\">\r\n                                            <div class=\"form-group\">\r\n                                                <label>Order Id: </label>\r\n                                                <div class=\"d-flex\">\r\n                                                    <h6>{order.order_id}</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>   \r\n                                        <div class=\"col-md-3\">\r\n                                            <div class=\"form-group\">\r\n                                                <label>Order Date: </label>\r\n                                                <div class=\"d-flex\">\r\n                                                    <h6>{getDateInDDMMYYYY(order.order_date)}</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>  \r\n                                        <div class=\"col-md-3\">\r\n                                            <div class=\"form-group\">\r\n                                                <label>Mobile No.: </label>\r\n                                                <div class=\"d-flex\">\r\n                                                    <h6>{order.mobile}</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>  \r\n                                        <div class=\"col-md-3\">\r\n                                            <div class=\"form-group\">\r\n                                                <label>Delivery Date: </label>\r\n                                                <div class=\"d-flex\">\r\n                                                <h6>{getDateInDDMMYYYY(order.delivery_date)}</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div> \r\n                                        <div class=\"col-md-3\">\r\n                                            <div class=\"form-group\">\r\n                                                <label>Customer Name: </label>\r\n                                                <div class=\"d-flex\">\r\n                                                    <h6>{order.full_name}</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div> \r\n                                        <div class=\"col-md-9\">\r\n                                            <div class=\"form-group\">\r\n                                                <label>Address: </label>\r\n                                                <div class=\"d-flex\">\r\n                                                    <h6>{order.flat_add + ', ' + order.street_add + ', ' + order.city + ', ' + order.state + ' - ' + order.pincode}</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"col-md-12\"> <hr /> </div>\r\n                                        <div class=\"col-md-12\">\r\n                                            <h5>Product List</h5>\r\n                                        </div>\r\n                                        <table className=\"unit-array-table table-min-width\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Product</th>\r\n                                                    <th>Received Quantity</th>\r\n                                                    {/* <th>Unit</th> */}\r\n                                                </tr>\r\n                                            </thead>\r\n                                                <tbody>\r\n                                                {(productList.length >0 ? productList :[]).map((data, index) => {\r\n                                                    return(\r\n                                                        <tr>\r\n                                                            <td>{data.product_name}</td>\r\n                                                            <td>\r\n                                                                <div class=\"d-flex justify-content-center\">\r\n                                                                    <input type=\"number\" name={\"provideQuantity-\"+data.product_id} class=\"cost-input\" id={\"provideQuantity-\"+data.product_id} min=\"0\" step=\"0.01\" required/>\r\n                                                                    <p class=\"cost-input-adoptment\"> {data.delivered_unit_name} </p>\r\n                                                                </div>\r\n                                                            </td>\r\n                                                            {/* <td>\r\n                                                                <select id={\"productUnit-\"+data.product_id} class=\"select-verified-product\" required>\r\n                                                                    <option  value = \"\">Select any one</option>\r\n                                                                    {(productUnitList.length > 0 ? productUnitList : [] ).map((data)=>{\r\n                                                                        return(\r\n                                                                            data.is_bundle === 0 ? <option id={data.id} value={data.id} >{data.unit_name}</option> :null\r\n                                                                        )\r\n                                                                    })\r\n                                                                    }\r\n                                                                </select>\r\n                                                            </td> */}\r\n                                                        </tr>\r\n                                                        )\r\n                                                    })\r\n                                                }\r\n                                                </tbody>\r\n                                            </table>\r\n                                        <div class=\"form-group p-4\">\r\n                                            <input type=\"submit\" value=\"Submit\" class=\"btn  px-4 btn-primary\" disabled={isSubmitting} />\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n        <Footer />\r\n        {isLoading ?   <CallLoader />   : null  }\r\n    </Fragment>\r\n    )\r\n}"],"sourceRoot":""}